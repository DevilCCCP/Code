Идея состоит в графе переходов системы из одного состояния в другое.
Переход осуществляется скриптом, который после выполнения действия
изменяет условия получения дальнейшего скрипта. Если нового скрипта нет,
значит дальнейшего перехода пока нет.
Скрипт выполняется от рута, перед выполнением производится проверка 
подписи содержимого скрипта. Таким образом, дырой в безопасности может
быть только криптографическая библиотека.
Скрипт должен быть устроен так, чтобы многократное его исполнение после
частичного исполнения не приводило к проблемам.

Скрипт может доставляться из любого источника. Возможна ручная загрузка
и выгрузка из заданного места например http/https. Выгрузка работает от
ограниченного пользователя. Пользователь основной системы может запускать
сервис запуска скрипта, что прописано в sudoers.

Скрипт представляет из себя либо:
PROJ-batch-VERSION.sh
PROJ-batch-VERSION.sgn
либо:
PROJ-batch-VERSION.7z
  -> PROJ-batch-VERSION.sh
  -> .....
PROJ-batch-VERSION.sgn

Файлы службы выполнения скрипта:
/etc/systemd/system/PROJ_batch.service
/usr/libexec/PROJ-batch-exec.sh
/etc/sudoers.d/PROJ-batch

Файлы службы загрузки скрипта:
/etc/systemd/system/PROJ_batch_loader.service
/etc/systemd/system/PROJ_batch_loader.timer
/usr/libexec/PROJ-batch-load.sh

Загрузка:
Файлы надо выкладывать на http/https сервер
${ProjUri}/batch_listVERSION.txt
содержит список файлов для скачивания
PROJ-batch-VERSION.sh || PROJ-batch-VERSION.7z
PROJ-batch-VERSION.sgn
для каждой версии, для которой предусмотрен переход на новую версию

скрипт перехода должен заканчиваться примерно так:
echo NEW_VERSION > /usr/share/PROJ_batch/Ver
